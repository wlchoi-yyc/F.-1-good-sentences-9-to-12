<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>ä½³å¥èƒŒèª¦éŠæˆ²</title>
<style>
body { font-family: "Noto Sans TC", sans-serif; background: #f0f4f8; margin: 0; padding: 20px; }
h1, h2 { text-align: center; }
.game-btn { display: block; margin: 10px auto; padding: 10px 20px; font-size: 16px; cursor: pointer; }
#game, #result { display: none; text-align: center; }
.sentence-part, .option { display: inline-block; padding: 5px 10px; margin: 5px; border: 1px solid #333; background: #fff; cursor: grab; }
.dropzone { min-height: 30px; border: 1px dashed #aaa; padding: 10px; margin: 5px; background: #e0e0e0; }
</style>
</head>
<body>

<h1>ä½³å¥èƒŒèª¦å°éŠæˆ²</h1>

<div id="menu">
  <p>è«‹é¸æ“‡ä¸€å€‹éŠæˆ²æ¨¡å¼ä¾†é–‹å§‹ç·´ç¿’å››å¥ä½³å¥ï¼š</p>
  <button class="game-btn" onclick="startGame(1)">ä½³å¥æ¥é¾</button>
  <button class="game-btn" onclick="startGame(2)">ä½³å¥æ‰“åœ°é¼ </button>
  <button class="game-btn" onclick="startGame(3)">ä½³å¥å¡«ç©º</button>
  <button class="game-btn" onclick="startGame(4)">ä½³å¥é€£é€£çœ‹</button>
</div>

<div id="game">
  <h2 id="gameTitle"></h2>
  <div id="score">åˆ†æ•¸ï¼š0</div>
  <div id="gameArea"></div>
  <div id="result"></div>
</div>

<script>
const sentences = [
  "æˆ‘çš„å¿ƒçŒ›ç„¶æ„Ÿåˆ°ä¸€ç¨®èªªä¸å‡ºçš„æƒ†æ‚µï¼Œä¸€è‚¡è‹¦æ¾€çš„å‘³é“ç¿»ä¸Šå¿ƒé ­ï¼Œå°±åƒåäº†ä¸€å£é›£å’½çš„ä¸­è—¥ï¼›ä¸²ä¸²æ·šæ°´ï¼Œåƒæ–·äº†ç·šçš„ç å­ï¼Œæ³‰æ¹§èˆ¬é †ç€è‡‰é °æ»¾è½ä¸‹ä¾†ã€‚",
  "è¿·èŒ«ã€å½·å¾¨ã€æ‚µæƒ˜çš„æ€ç·’ï¼Œçºç¹ç€æˆ‘ï¼Œä½¿æˆ‘ç•°å¸¸ç—›è‹¦ã€‚æˆ‘ç™¡å‘†å‘†åœ°ç«™ç€ï¼Œå¿ƒè£¡ä¸Šä¸Šä¸‹ä¸‹åœ°ç¿»æ»¾æŠ˜é¨°ï¼Œäº”è‡Ÿå…­è…‘éƒ½å½·å½¿æŒªå‹•äº†ä½ç½®ã€‚",
  "æˆ‘çš„é¼»å­éƒ½æ°£æ­ªäº†ï¼Œå¿ƒè£¡é‚£è‚¡ç«æ°£ï¼Œå°±åƒç«çƒä¸€æ¨£åœ¨èƒ¸è†›è£¡äº‚æ»¾ï¼›åˆåƒç«å±±å…§ç†¾ç†±çš„å²©æ¼¿åœ¨æ¹§å‹•ï¼Œå½·å½¿å°±è¦æ²–æ±ºè€Œå‡ºäº†ã€‚",
  "æˆ‘èè¨Šå¤§åƒä¸€é©šï¼ŒçŒ¶å¦‚æ™´å¤©éŸ¿èµ·ä¸€è²éœ¹é›·ï¼Œå¹³åœ°å·èµ·ä¸€è‚¡æ—‹é¢¨ï¼Œå€åœ°æ‰“äº†å€‹å¯’å™¤ï¼Œé©šå¾—å¹¾ä¹èº¥äº†èµ·ä¾†ã€‚ä¸€è‚¡ç„¡åçš„ææ‡¼ï¼Œæ¯’è›‡çš„çºåœ¨æˆ‘å¿ƒä¸Šï¼Œä¹…ä¹…ä¸èƒ½æ“ºè„«ã€‚"
];
let currentGame = 1;
let currentSentenceIndex = 0;
let score = 0;

function backToMenu() {
  document.getElementById('game').style.display = 'none';
  document.getElementById('menu').style.display = 'block';
  document.getElementById('result').style.display = 'none';
}

function startGame(gameId) {
  currentGame = gameId;
  currentSentenceIndex = 0;
  score = 0;
  document.getElementById('menu').style.display = 'none';
  document.getElementById('game').style.display = 'block';
  document.getElementById('result').style.display = 'none';
  loadSentence();
}

function loadSentence() {
  document.getElementById('score').textContent = `åˆ†æ•¸ï¼š${score}`;
  document.getElementById('result').style.display = 'none';
  let titleArr = ["ä½³å¥æ¥é¾", "ä½³å¥æ‰“åœ°é¼ ", "ä½³å¥å¡«ç©º", "ä½³å¥é€£é€£çœ‹"];
  document.getElementById('gameTitle').textContent = `${titleArr[currentGame - 1]} - ç¬¬ ${currentSentenceIndex + 1} å¥`;
  let area = document.getElementById('gameArea');
  area.innerHTML = '';
  let s = sentences[currentSentenceIndex];

  if (currentGame === 1) { // ä½³å¥æ¥é¾
    let parts = s.split(/[ï¼Œï¼›ã€‚]/).filter(p => p);
    parts = parts.sort(() => Math.random() - 0.5);
    parts.forEach(p => {
      let span = document.createElement('span');
      span.className = 'sentence-part';
      span.textContent = p;
      span.draggable = true;
      span.ondragstart = e => e.dataTransfer.setData('text/plain', e.target.textContent);
      area.appendChild(span);
    });
    let dropzone = document.createElement('div');
    dropzone.className = 'dropzone';
    dropzone.ondragover = e => e.preventDefault();
    dropzone.ondrop = e => {
      e.preventDefault();
      let data = e.dataTransfer.getData('text/plain');
      let p = document.createElement('span');
      p.textContent = data;
      dropzone.appendChild(p);
      checkOrder(dropzone);
    };
    area.appendChild(dropzone);
  } else if (currentGame === 2) { // æ‰“åœ°é¼ 
    let parts = s.split(/[ï¼Œï¼›ã€‚]/).filter(p => p);
    let extra = ["éš¨ä¾¿çš„å¥å­", "ç„¡é—œçŸ­èª", "å‡çŸ­èª"];
    let mixed = parts.concat(extra).sort(() => Math.random() - 0.5);
    mixed.forEach(t => {
      let btn = document.createElement('button');
      btn.className = 'game-btn';
      btn.textContent = t;
      btn.onclick = () => {
        if (parts.includes(t)) {
          score += 10;
          showResult(true);
        } else {
          score -= 5;
          showResult(false);
        }
      };
      area.appendChild(btn);
    });
  } else if (currentGame === 3) { // å¡«ç©º
    let missing = s.split(/[ï¼Œï¼›ã€‚]/).filter(p => p)[1];
    let display = s.replace(missing, "______");
    let p = document.createElement('p');
    p.textContent = display;
    area.appendChild(p);
    let options = [missing, "éš¨ä¾¿çŸ­èª", "å‡å¥å­"].sort(() => Math.random() - 0.5);
    options.forEach(o => {
      let btn = document.createElement('button');
      btn.className = 'game-btn option';
      btn.textContent = o;
      btn.onclick = () => {
        if (o === missing) {
          score += 10;
          showResult(true);
        } else {
          score -= 5;
          showResult(false);
        }
      };
      area.appendChild(btn);
    });
  } else if (currentGame === 4) { // é€£é€£çœ‹
    let parts = s.split(/[ï¼Œï¼›ã€‚]/).filter(p => p);
    let targets = [...parts].sort(() => Math.random() - 0.5);
    targets.forEach(t => {
      let dz = document.createElement('div');
      dz.className = 'dropzone';
      dz.textContent = "æ”¾ç½®çŸ­èª";
      dz.ondragover = e => e.preventDefault();
      dz.ondrop = e => {
        e.preventDefault();
        let data = e.dataTransfer.getData('text/plain');
        if (data === t) {
          dz.textContent = data;
          score += 10;
          showResult(true);
        } else {
          score -= 5;
          showResult(false);
        }
      };
      area.appendChild(dz);
    });
    parts.forEach(p => {
      let span = document.createElement('span');
      span.className = 'sentence-part';
      span.textContent = p;
      span.draggable = true;
      span.ondragstart = e => e.dataTransfer.setData('text/plain', p);
      area.appendChild(span);
    });
  }
}

function checkOrder(dropzone) {
  let correct = sentences[currentSentenceIndex].split(/[ï¼Œï¼›ã€‚]/).filter(t => t);
  let current = Array.from(dropzone.children).map(c => c.textContent);
  if (current.join('') === correct.join('')) {
    score += 10;
    showResult(true);
  } else if (current.length === correct.length) {
    score -= 5;
    showResult(false);
  }
}

function showResult(isCorrect) {
  document.getElementById('result').style.display = 'block';
  document.getElementById('result').innerHTML = isCorrect ? "âœ… æ­£ç¢ºï¼<button onclick='nextSentence()'>ä¸‹ä¸€é—œ</button>"
    : "âŒ éŒ¯èª¤ï¼<button onclick='nextSentence()'>ä¸‹ä¸€é—œ</button>";
  document.getElementById('score').textContent = `åˆ†æ•¸ï¼š${score}`;
}

function nextSentence() {
  currentSentenceIndex++;
  if (currentSentenceIndex < 4) {
    loadSentence();
  } else {
    document.getElementById('gameArea').innerHTML = `ğŸ‰ å®Œæˆæ‰€æœ‰ä½³å¥ï¼<br>ç¸½åˆ†ï¼š${score}<br><button onclick='backToMenu()'>å›ä¸»é¸å–®</button>`;
    document.getElementById('result').style.display = 'none';
  }
}
</script>
</body>
</html>
